{"ast":null,"code":"var _jsxFileName = \"/Users/tomer/Documents/Tomer/Personal-Projects/Inventory-Managment-Project/Frontend/src/pages/CreateBranch.tsx\",\n  _s = $RefreshSig$();\n// src/pages/CreateBranch.tsx\n\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { createBranch } from \"../services/branchService\";\nimport { Container, Typography, TextField, Button, Box, Alert } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateBranch = () => {\n  _s();\n  const {\n    role\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [branch, setBranch] = useState({\n    name: \"\",\n    address: \"\"\n  });\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n  if (role !== \"admin\") {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"sm\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          children: \"Access Denied. Only admins can create branches.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this);\n  }\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setBranch(prevBranch => ({\n      ...prevBranch,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(false);\n\n    // Basic validation\n    if (!branch.name.trim() || !branch.address.trim()) {\n      setError(\"Name and Address are required.\");\n      return;\n    }\n    setLoading(true);\n    try {\n      const newBranch = await createBranch({\n        name: branch.name.trim(),\n        address: branch.address.trim()\n      });\n      setSuccess(true);\n      setBranch({\n        name: \"\",\n        address: \"\"\n      });\n      navigate(`/branch/${newBranch._id}/items`); // Redirect to the new branch's item list\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to create branch. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        align: \"center\",\n        gutterBottom: true,\n        children: \"\\u05E6\\u05D5\\u05E8 \\u05E1\\u05E0\\u05D9\\u05E3 \\u05D7\\u05D3\\u05E9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mb: 2\n        },\n        children: \"\\u05E1\\u05E0\\u05D9\\u05E3 \\u05E0\\u05D5\\u05E6\\u05E8 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"form\",\n        onSubmit: handleSubmit,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          label: \"\\u05E9\\u05DD \\u05D4\\u05E1\\u05E0\\u05D9\\u05E3\",\n          name: \"name\",\n          value: branch.name,\n          onChange: handleChange,\n          fullWidth: true,\n          required: true,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA\",\n          name: \"address\",\n          value: branch.address,\n          onChange: handleChange,\n          fullWidth: true,\n          required: true,\n          multiline: true,\n          rows: 3,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          fullWidth: true,\n          sx: {\n            mt: 3,\n            backgroundColor: \"#333333\",\n            // Dark background color\n            color: \"#ffffff\",\n            // White text color\n            \"&:hover\": {\n              backgroundColor: \"#555555\" // Slightly lighter dark on hover\n            }\n          },\n          disabled: loading,\n          children: loading ? \"יוצר..\" : \"צור סניף\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateBranch, \"CfOSbbt66TWSFJpOEcc1esEdmfQ=\", false, function () {\n  return [useNavigate];\n});\n_c = CreateBranch;\nexport default CreateBranch;\nvar _c;\n$RefreshReg$(_c, \"CreateBranch\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","AuthContext","createBranch","Container","Typography","TextField","Button","Box","Alert","jsxDEV","_jsxDEV","CreateBranch","_s","role","navigate","branch","setBranch","name","address","error","setError","success","setSuccess","loading","setLoading","maxWidth","children","sx","mt","severity","fileName","_jsxFileName","lineNumber","columnNumber","handleChange","e","value","target","prevBranch","handleSubmit","preventDefault","trim","newBranch","_id","err","_err$response","_err$response$data","console","response","data","message","variant","align","gutterBottom","mb","component","onSubmit","noValidate","label","onChange","fullWidth","required","margin","multiline","rows","type","backgroundColor","color","disabled","_c","$RefreshReg$"],"sources":["/Users/tomer/Documents/Tomer/Personal-Projects/Inventory-Managment-Project/Frontend/src/pages/CreateBranch.tsx"],"sourcesContent":["// src/pages/CreateBranch.tsx\n\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { createBranch } from \"../services/branchService\";\n\nimport {\n  Container,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  Alert,\n} from \"@mui/material\";\n\nconst CreateBranch: React.FC = () => {\n  const { role } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const [branch, setBranch] = useState({\n    name: \"\",\n    address: \"\",\n  });\n\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  if (role !== \"admin\") {\n    return (\n      <Container maxWidth=\"sm\">\n        <Box sx={{ mt: 4 }}>\n          <Alert severity=\"error\">Access Denied. Only admins can create branches.</Alert>\n        </Box>\n      </Container>\n    );\n  }\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n    setBranch((prevBranch) => ({\n      ...prevBranch,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(false);\n\n    // Basic validation\n    if (!branch.name.trim() || !branch.address.trim()) {\n      setError(\"Name and Address are required.\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const newBranch = await createBranch({\n        name: branch.name.trim(),\n        address: branch.address.trim(),\n      });\n      setSuccess(true);\n      setBranch({ name: \"\", address: \"\" });\n      navigate(`/branch/${newBranch._id}/items`); // Redirect to the new branch's item list\n    } catch (err: any) {\n      console.error(err);\n      setError(err.response?.data?.message || \"Failed to create branch. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box sx={{ mt: 4 }}>\n        <Typography variant=\"h4\" align=\"center\" gutterBottom>\n          צור סניף חדש\n        </Typography>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n        {success && (\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\n            סניף נוצר בהצלחה!\n          </Alert>\n        )}\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n          <TextField\n            label=\"שם הסניף\"\n            name=\"name\"\n            value={branch.name}\n            onChange={handleChange}\n            fullWidth\n            required\n            margin=\"normal\"\n          />\n          <TextField\n            label=\"כתובת\"\n            name=\"address\"\n            value={branch.address}\n            onChange={handleChange}\n            fullWidth\n            required\n            multiline\n            rows={3}\n            margin=\"normal\"\n          />\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            fullWidth\n            sx={{ mt: 3,backgroundColor: \"#333333\", // Dark background color\n              color: \"#ffffff\", // White text color\n              \"&:hover\": {\n                backgroundColor: \"#555555\", // Slightly lighter dark on hover\n              }, }}\n            disabled={loading}\n          >\n            {loading ? \"יוצר..\" : \"צור סניף\"}\n          </Button>\n        </Box>\n      </Box>\n    </Container>\n  );\n};\n\nexport default CreateBranch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}